var Settings=function(){var e={};return e.tDir=WPURLS.theme_path,e}(),General=function(){function e(){var e='<a href="{{url}}" target="_blank" class="single-tweet clear"><div class="single-tweet__img"><div class="single-tweet__img-cover"></div><div class="single-tweet__img-bg" style="{{image}}"></div><div class="single-tweet__img-inner"></div></div><div class="single-tweet__text">{{tweet}}</div></a>';$(".twitter-grid").twittie({username:"citizen_museum",count:9,hideReplies:!0,dateFormat:"%b/%d/%Y",template:e,apiPath:Settings.tDir+"/api/tweet.php",loadingText:""},function(){$(".fixedsticky").fixedsticky()})}function i(){var e=new WOW({boxClass:"scroll-a",animateClass:"animated",live:!1,callback:function(e){}});e.init()}function a(){$(".js-modal-trigger").click(function(e){l($(this))}),$("body").on("click",".modal__close",function(){o()}),$(".section-intro__jump-links a").click(function(e){var i=$(this).attr("href"),a=$(i).offset().top;TweenLite.to(window,.75,{scrollTo:{y:a},ease:Power4.easeOut}),e.preventDefault()}),$(document).keyup(function(e){27==e.which&&o()}),$(window).resize(function(){t()}),$(window).scroll(function(){var e=$(window).scrollTop(),i=$(".section-intro").height();i>=e&&$(".scroll-top-btn").hasClass("active")?$(".scroll-top-btn").removeClass("active"):e>i&&!$(".scroll-top-btn").hasClass("active")&&$(".scroll-top-btn").addClass("active")}),$(".js-scroll-top-btn").click(function(e){TweenLite.to(window,.75,{scrollTo:{y:0},ease:Power4.easeOut}),e.preventDefault()})}function t(){$(".js-match-item").height(""),$(".js-match-row").each(function(){var e=$(this),i=e.children(".js-match-item").map(function(){return $(this).height()}).get(),a=Math.max.apply(null,i);e.children(".js-match-item").height(a)})}function l(e){function i(){if(clearTimeout(g),$(m).addClass(t).hide().appendTo("body"),"gallery"==a&&($(".swiper-container").data("swiper").stopAutoplay(),e.siblings(".swiper-wrapper").find(".swiper-slide:not(.swiper-slide-duplicate)").each(function(){var e=$(this).data("img");$(".modal .swiper-wrapper").append('<div class="swiper-slide"><img src="'+e+'"></div>')})),c&&$(c).remove(),r&&$(".modal").css("background-color",r),$("body").removeClass("loading").addClass("no-scroll"),TweenMax.set(".modal",{opacity:0,scale:.95}),$(".modal").show(),"gallery"==a){var i=e.closest(".swiper-container").find(".swiper-counter__curr").text()-1;$(".modal-swiper").swiper({slidesPerView:"auto",centeredSlides:!0,slideToClickedSlide:!0,grabCursor:!0,roundLengths:!0,initialSlide:i})}"video"==a&&($(".modal__video").fitVids(),v===!0&&($("#vimeoplayer").load(function(){var e=$("#vimeoplayer")[0],i=$f(e);i.api("play")}),Modernizr.touchevents||document.getElementById("vidpreview").pause())),TweenMax.to(".modal",1,{opacity:1,scale:1,ease:Power4.easeOut,clearProps:"opacity, scale"})}var a=e.data("modal"),t=e.data("modal-class");if("object"==a||"single"==a)var l=e.data("src"),o=e.data("title"),s=e.data("caption"),n=e.data("link-text"),d=e.data("link-url"),r=e.data("bg"),c=new Image;if("video"==a)if("intro"==e.data("video-modal"))var v=!0;else var v=!1;var m='<div class="modal"><div class="modal__close js-modal-close"></div>';if("object"==a&&(m=m+'<div class="modal__bg bg--contain" style="background-image:url('+l+')"></div>'),m+="gallery"==a?'<div class="modal-container--edgeless"><div class="table"><div class="table-cell">':'<div class="modal-container"><div class="table"><div class="table-cell">',"single"==a&&(m=m+'<div class="col col--40 col--pad float--right"><div class="modal__img"><img src="'+l+'"></div></div>'),"gallery"==a&&(m+='<div class="modal-swiper swiper-container"><div class="swiper-wrapper"></div></div>'),"video"==a){var u=e.siblings(".body-text--video-dormant").find("iframe"),p=u.attr("src"),w=u.attr("width"),f=u.attr("height");if(-1!=p.search("vimeo")){m=m+'<div class="modal__video"><iframe id="vimeoplayer" src="'+p+'&player_id=vimeoplayer" width="'+w+'" height="'+f+'" frameborder="0" allowfullscreen></iframe></div>'}else{m=m+'<div class="modal__video"><iframe src="'+p+'&autoplay=1" width="'+w+'" height="'+f+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>'}}("object"==a||"single"==a)&&(m=m+'<div class="col col--60 col--pad"><div class="modal__title heading--medium">'+o+'</div><div class="modal__content">'+s+"</div>"),d&&n&&(m=m+'<a href="'+d+'" class="button modal__cta">'+n+"</a>"),m+="</div></div></div></div></div>";var g=setTimeout(function(){$("body").addClass("loading")},250);setTimeout(function(){c?$(c).attr("src",l).load(function(){i()}):i()},50)}function o(){function e(){$(".modal").remove(),$("body").removeClass("no-scroll")}TweenMax.to(".modal",.5,{opacity:0,ease:Power2.easeOut,onComplete:e,force3D:!0}),$(".swiper-container").data("swiper").startAutoplay(),$(".modal__video").length&&1==document.getElementById("vidpreview").paused&&!Modernizr.touchevents&&document.getElementById("vidpreview").play()}function s(){new Swiper(".slider-container",{slidesPerView:"auto",centeredSlides:!0,slideToClickedSlide:!0,grabCursor:!0,loop:!0,initialSlide:1,roundLengths:!0});$(".fader-container").each(function(){var e=$(this);e.swiper({slidesPerView:1,loop:!0,effect:"fade",autoplay:2e3});var i=e.data("swiper").slides.length-2;e.data("swiper").on("onSlideChangeStart",function(a){var t=(a.activeIndex-1)%i+1;0===t?e.find(".swiper-counter__curr").html(i):e.find(".swiper-counter__curr").html(t)})})}var n={};return n.init=function(){a(),s(),i(),t(),$(".single-content").fitVids(),e()},n}();$(document).ready(function(){General.init()});